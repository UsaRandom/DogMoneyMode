(()=>{"use strict";let e=.0774;function t(e,t,o){const n=new RegExp(t.source,t.flags).exec(e);return n?parseFloat(n[2].replace(/[, ]/g,""))/o:null}function o(n,a){if(!(n.tagName&&"input"===n.tagName.toLowerCase()||n.isContentEditable))if(n.childNodes.length>0)Array.from(n.childNodes).forEach((e=>o(e,a)));else{let o=function(o,n){for(replaced=!1;;){var a=o.match(n);if(!a)break;var r=a.reduce((function(e,t){return e.length>t.length?e:t}));if(1===r.length)break;var i=t(r,n,e);if(null!==i){var c={};i<1?(c.minimumFractionDigits=3,c.maximumFractionDigits=3):i<100?(c.minimumFractionDigits=2,c.maximumFractionDigits=2):(c.minimumFractionDigits=0,c.maximumFractionDigits=0);let e=o.indexOf(r);o=e>0&&"-"===o.charAt(e-1)?o.replace(r,` Ð${i.toLocaleString("en-US",c)}`):o.replace(r,`Ð${i.toLocaleString("en-US",c)}`),replaced=!0}}return{text:o,replaced}}(n.textContent,a);o.replaced&&(n.textContent=o.text)}}function n(){var t=function(e){const t=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`(${t}\\s*)(\\d{1,3}(?:,\\d{3})*(?:\\.\\d+)?|\\d*(?:\\.\\d+)?)`)}("$");if(/^(www\.)?amazon\.[a-z\.]{2,5}$/.test(window.location.hostname)&&(n=document.querySelectorAll(".a-price")).forEach((function(t){if(!t.textContent.includes("Ð")){var o=t.querySelector(".a-offscreen"),n=t.querySelectorAll(".a-price-whole, .a-price-fraction"),a=t.querySelector(".a-price-symbol");if(o&&n.length>0){var r=o.textContent.replace("$","").replace(/,/g,""),i=(parseFloat(r)/parseFloat(e)).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2});o.textContent="Ð"+i,a&&(a.textContent="Ð");var[c,l]=i.split(".");n[0].textContent=c+n[0].querySelector(".a-price-decimal").textContent,n[1].textContent=l}}})),/^(www\.)?newegg\.[a-z\.]{2,5}$/.test(window.location.hostname)){var n=document.querySelectorAll(".price-current"),a=document.querySelectorAll(".goods-price-current");n.forEach((function(t){if(!t.textContent.includes("Ð")){var o=t.querySelector("strong"),n=t.querySelector("sup"),a=Array.from(t.childNodes).findIndex((e=>3===e.nodeType&&e.nodeValue.includes("$")));if(o&&n&&a>-1){var r=o.textContent.replace(/,/g,"")+"."+n.textContent.replace(/,/g,""),i=(parseFloat(r)/parseFloat(e)).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2}),[c,l]=i.split(".");o.textContent=c,n.textContent=l;var s=t.childNodes[a];s.nodeValue=s.nodeValue.replace("$","Ð")}}})),a.forEach((function(t){if(!t.textContent.includes("Ð")){var o=t.querySelector(".goods-price-value strong"),n=t.querySelector(".goods-price-value sup"),a=t.querySelector(".goods-price-symbol");if(o&&n){var r=o.textContent.replace(/,/g,"")+"."+n.textContent.replace(/,/g,""),i=(parseFloat(r)/parseFloat(e)).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2}),[c,l]=i.split(".");o.textContent=c,n.textContent=l,a&&(a.textContent="Ð")}}}))}o(document.body,t)}const a=new class{constructor(){this.localStorageKey="dmm-app-state"}setAppState(e){localStorage.setItem(this.localStorageKey,JSON.stringify(e))}getAppState(){return JSON.parse(localStorage.getItem(this.localStorageKey))||{dogMoneyModeEnabled:!1,comicSansModeEnabled:!1}}},r=new class{constructor(){this.localStorageKey="dmm-exchange-rates",this.timeToLive=12e4}async _fetchRates(){const e=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=dogecoin&vs_currencies=USD,EUR,CNY,JPY,GBP,INR,RUB"),t=(await e.json()).dogecoin,o={updatedOn:Date.now(),rates:t};return localStorage.setItem(this.localStorageKey,JSON.stringify(o)),o}async getRates(){let e=JSON.parse(localStorage.getItem(this.localStorageKey));return(!e||Date.now()-e.updatedOn>this.timeToLive)&&(e=this._fetchRates()),e.rates}};let i=a.getAppState(),c=r.getRates(),l=null;!function(){clearInterval(l);let t=i;i=a.getAppState(),i.dogMoneyModeEnabled?(c=r.getRates(),e=c.USD,n()):t.dogMoneyModeEnabled&&location.reload(),i.comicSansModeEnabled?document.documentElement.classList.add("dogmoneymode-comic-sans"):document.documentElement.classList.remove("dogmoneymode-comic-sans"),l=setInterval(updateView,500)}()})();