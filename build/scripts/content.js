(()=>{var e={543:()=>{}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,o),a.exports}(()=>{"use strict";var e=o(543);let t=.0774;function r(e,t,o){const r=new RegExp(t.source,t.flags).exec(e);return r?parseFloat(r[2].replace(/[, ]/g,""))/o:null}function n(e,o){if(!(e.tagName&&"input"===e.tagName.toLowerCase()||e.isContentEditable))if(e.childNodes.length>0)Array.from(e.childNodes).forEach((e=>n(e,o)));else{let n=function(e,o){let n=!1;for(;;){var a=e.match(o);if(!a)break;var c=a.reduce((function(e,t){return e.length>t.length?e:t}));if(1===c.length)break;var i=r(c,o,t);if(null!==i){var l={};i<1?(l.minimumFractionDigits=3,l.maximumFractionDigits=3):i<100?(l.minimumFractionDigits=2,l.maximumFractionDigits=2):(l.minimumFractionDigits=0,l.maximumFractionDigits=0);let t=e.indexOf(c);e=t>0&&"-"===e.charAt(t-1)?e.replace(c,` Ð${i.toLocaleString("en-US",l)}`):e.replace(c,`Ð${i.toLocaleString("en-US",l)}`),n=!0}}return{text:e,replaced:n}}(e.textContent,o);n.replaced&&(e.textContent=n.text)}}let a=[];a.push(new class{constructor(){}replace(t){if(/^(www\.)?amazon\.[a-z\.]{2,5}$/.test(window.location.hostname)){let o=document.querySelectorAll(".a-price"),r=null;o.forEach((function(o){if(!o.textContent.includes("Ð")){let u=o.querySelector(".a-price-symbol"),m=u.textContent;if(!r){let t=e.Currency.getCurrencyBySymbol(m);t&&(r=t,console.log("Detected ${currencyResult}"))}var n=o.querySelector(".a-offscreen"),a=o.querySelectorAll(".a-price-whole, .a-price-fraction");if(n&&a.length>0){var c=n.textContent.replace(m,"").replace(/,/g,""),i=(parseFloat(c)/parseFloat(t[r])).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2});n.textContent="Ð"+i,u&&(u.textContent="Ð");var[l,s]=i.split(".");a[0].textContent=l+a[0].querySelector(".a-price-decimal").textContent,a[1].textContent=s}}}))}}}),a.push(new class{replace(e){let t=e.usd;if(/^(www\.)?newegg\.[a-z\.]{2,5}$/.test(window.location.hostname)){let e=document.querySelectorAll(".price-current"),o=document.querySelectorAll(".goods-price-current");e.forEach((function(e){if(!e.textContent.includes("Ð")){let o=e.querySelector("strong"),r=e.querySelector("sup"),n=Array.from(e.childNodes).findIndex((e=>3===e.nodeType&&e.nodeValue.includes("$")));if(o&&r&&n>-1){let a=o.textContent.replace(/,/g,"")+"."+r.textContent.replace(/,/g,""),c=(parseFloat(a)/parseFloat(t)).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2}),[i,l]=c.split(".");o.textContent=i,r.textContent=l;let s=e.childNodes[n];s.nodeValue=s.nodeValue.replace(fiat_currency_symbol,"Ð")}}})),o.forEach((function(e){if(!e.textContent.includes("Ð")){let o=e.querySelector(".goods-price-value strong"),r=e.querySelector(".goods-price-value sup"),n=e.querySelector(".goods-price-symbol");if(o&&r){let e=o.textContent.replace(/,/g,"")+"."+r.textContent.replace(/,/g,""),a=(parseFloat(e)/parseFloat(t)).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2}),[c,i]=a.split(".");o.textContent=c,r.textContent=i,n&&(n.textContent="Ð")}}}))}}});const c=new class{constructor(){this.localStorageKey="dmm-app-state"}async setAppState(e){const t={};return t[this.localStorageKey]=e,new Promise(((e,o)=>{chrome.storage.local.set(t,(()=>{if(chrome.runtime.lastError)return o(chrome.runtime.lastError);e()}))}))}async getAppState(){return new Promise(((e,t)=>{chrome.storage.local.get(this.localStorageKey,(o=>{if(chrome.runtime.lastError)return t(chrome.runtime.lastError);e(o[this.localStorageKey]||{dogMoneyModeEnabled:!1,comicSansModeEnabled:!1})}))}))}},i=new class{constructor(){this.localStorageKey="dmm-exchange-rates",this.timeToLive=12e4}async _fetchRates(){const e=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=dogecoin&vs_currencies=USD,EUR,CNY,JPY,GBP,INR,RUB"),t=(await e.json()).dogecoin,o={updatedOn:Date.now(),rates:t};return new Promise(((e,t)=>{chrome.storage.local.set({[this.localStorageKey]:o},(()=>{if(chrome.runtime.lastError)return t(chrome.runtime.lastError);e(o)}))}))}async getRates(){return new Promise(((e,t)=>{chrome.storage.local.get(this.localStorageKey,(async o=>{let r=o[this.localStorageKey];if(!r||Date.now()-r.updatedOn>this.timeToLive)try{r=await this._fetchRates()}catch(e){return t(e)}e(r.rates)}))}))}};let l=c.getAppState(),s=i.getRates(),u=null;!async function e(){try{clearInterval(u);let o=l;l=await c.getAppState(),l.dogMoneyModeEnabled?(s=await i.getRates(),t=s.usd,function(){a.forEach((e=>{e.replace(s)}));var e=function(e){const t="$".replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`(${t}\\s*)(\\d{1,3}(?:,\\d{3})*(?:\\.\\d+)?|\\d*(?:\\.\\d+)?)`)}();n(document.body,e)}()):o.dogMoneyModeEnabled&&location.reload(),l.comicSansModeEnabled?document.documentElement.classList.add("dogmoneymode-comic-sans"):document.documentElement.classList.remove("dogmoneymode-comic-sans"),u=setInterval(e,500)}catch(e){console.error(e)}}()})()})();